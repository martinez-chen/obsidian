#redis #session #login

### 根據 session 實現
1.  發送訊息驗證碼
	```mermaid 
	
	graph LR 
	
	A[開始] --> B(送出手機號碼)
	    B --> C{驗證手機號碼}
	    C --> |不符合| B(送出手機號碼)
	    C --> |符合| E[生成驗證碼]
	    E --> F(保存驗證碼到session)
	    F --> G(發送驗證碼)
	    G --> Ｈ[結束]
	
	```
1. 訊息驗證碼登入、註冊
	```mermaid 
	graph LR 
	
	A[開始] --> B(送出手機號碼和驗證碼)
		B --> C{檢查驗證碼}
		C --> |不一致| B(送出手機號碼和驗證碼)
		C --> |一致| D(根據手機號碼查詢用戶)
		D --> E{用戶是否存在}
		E --> |不存在| F(建立新用戶)
		F --> H(保存用戶到資料庫)
		H --> G(保存到session)
		E --> |存在| G(保存到session)
	```
1. 驗證登入狀態
	```mermaid 
	graph LR 
	
	A[開始] --> B(請求並攜帶 cookie)
		B --> C(從session獲得用戶資訊)
		C -->  D{判斷用戶是否存在}
		D --> |存在|E
		D --> |不存在| F
		
	```